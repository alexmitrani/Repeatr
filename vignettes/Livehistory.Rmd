---
title: "Livehistory"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Livehistory}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  fig.width=7,
  comment = "#>"
)
```

```{r, include = FALSE}
library(Repeatr)
```

## Live history

A visualization of the songs that Fugazi performed live using metadata from the [Fugazi Live Series](https://www.dischord.com/fugazi_live_series).  

This will be constructed using two data tables:
- summary
- songvarslookup

Let's get the data and limit it to the columns that we will be using: 

```{r }
mygraphdata <- summary %>%
  left_join(songvarslookup)

mygraphdata <- mygraphdata %>%
  select(song, launchdate, chosen, release, rating)

knitr::kable(mygraphdata, "pipe")

``` 

Now let's graph the data. The idea is to plot each song as a bubble, with the x-coordinate given by the launch date, and the y-coordinate given by the rating calculated from the choice modelling of the FLS data. The size of the bubble will be proportional to the number of times the song was played live, while the color of the bubble indicates the associated release in the band's discography.  There will be a lot of information packed into this graph!    

```{r }

p <- mygraphdata %>%
  ggplot( aes(x=launchdate, y=rating, size = chosen, color=release, label=song)) +
  geom_point(shape = 1) +
  theme_bw()

ggplotly(p)


```   

The graph is interactive: 

- hover over a song to see specific details about the song

- tap on a release in the legend to hide the corresponding
bubbles, tap on the release again to reveal them once more.  This is useful to focus on one or more specific releases by hiding the others.   


Enjoy!


